(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1797],{7942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>d,kt:()=>f});var a=n(959);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,f=u["".concat(l,".").concat(m)]||u[m]||p[m]||i;return n?a.createElement(f,o(o({ref:t},d),{},{components:n})):a.createElement(f,o({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},8721:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>l,toc:()=>d});var a=n(1163),r=(n(959),n(7942)),i=n(7128);const o={},s="Backend for frontend",l={unversionedId:"backend-for-frontend/index",id:"backend-for-frontend/index",title:"Backend for frontend",description:"Backend for frontend (BFF) is an architectural pattern in which each frontend client has a dedicated backend system. It enables client-specific customization of backend APIs with data transformations and optimizes requests by pre-fetching and caching data.",source:"@site/use-cases/backend-for-frontend/index.mdx",sourceDirName:"backend-for-frontend",slug:"/backend-for-frontend/",permalink:"/use-cases/backend-for-frontend/",draft:!1,editUrl:"https://github.com/metatypedev/metatype/tree/main/website/use-cases/backend-for-frontend/index.mdx",tags:[],version:"current",frontMatter:{},sidebar:"useCases",previous:{title:"Automatic CRUD & validation",permalink:"/use-cases/automatic-crud-validation/"},next:{title:"Function-as-a-service runner",permalink:"/use-cases/faas-runner/"}},c={},d=[{value:"Case study",id:"case-study",level:2},{value:"Metatype&#39;s solution",id:"metatypes-solution",level:2}],u={toc:d},p="wrapper";function m(e){let{components:t,...o}=e;return(0,r.kt)(p,(0,a.Z)({},u,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"backend-for-frontend"},"Backend for frontend"),(0,r.kt)("p",null,"Backend for frontend (BFF) is an architectural pattern in which each frontend client has a dedicated backend system. It enables client-specific customization of backend APIs with data transformations and optimizes requests by pre-fetching and caching data."),(0,r.kt)("h2",{id:"case-study"},"Case study"),(0,r.kt)("div",{className:"text-center md:float-right p-8"},(0,r.kt)("p",null,(0,r.kt)("img",{src:n(7630).Z,width:"311",height:"311"}))),(0,r.kt)("p",null,"Imagine you have a web frontend and a mobile app that both consume data from a (micro)services-based backend. The web frontend requires certain data fields in a format B, and the mobile app requires the same field plus additional ones in format B."),(0,r.kt)("p",null,"In a traditional architecture, both the web and mobile frontends would have to make separate API calls to the (micro)services, and then format the data into the appropriate structure themselves. This can lead to duplicated code, increased latency due heavier calls with non-necessary data, and decreased developer efficiency."),(0,r.kt)("p",null,"With a BFF in place, it handles the formatting of the data based on the specific needs of each client. All frontends can thus make a single API call to the BFF, which then communicates with the (micro)services, retrieves the data, and formats it into the required structure before returning it to the frontend."),(0,r.kt)("h2",{id:"metatypes-solution"},"Metatype's solution"),(0,r.kt)("p",null,"Metatype can act as a generic BFF component, serving multiple dedicated APIs and handling security, authentication and authorization for you. By encapsulating the logic for communicating with the (micro)services, Metatype helps to ensure that the frontends are as decoupled as possible from the other services, making it easier to make changes to either the frontend or the backend without affecting the other side."),(0,r.kt)(i.Z,{typegraph:"backend-for-frontend",python:n(9134),query:n(9081),mdxType:"TGExample"}))}m.isMDXComponent=!0},9428:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(959),r=n(6233),i=n(4838),o=n(2232),s=n(2441),l=n(6361);const c={container:"container_KHaM",panel:"panel_p8cl",editor:"editor_LjJP",response:"response_Ger1",tool:"tool_nUFu",notool:"notool_i7V8"},d=e=>{e.getWrapperElement().closest(".graphiql-editor").style.height=`${e.doc.height}px`};function u(e){const{queryEditor:t,variableEditor:n,headerEditor:r}=(0,l._i)({nonNull:!0}),[i,o]=(0,a.useState)(e.defaultTab),s=(0,l.Xd)({onCopyQuery:e.onCopyQuery}),u=(0,l.fE)();return(0,a.useEffect)((()=>{n&&d(n)}),[i,n]),(0,a.useEffect)((()=>{r&&d(r)}),[i,r]),(0,a.useEffect)((()=>{t&&(t.setOption("lineNumbers",!1),t.setOption("extraKeys",{"Alt-G":()=>{t.replaceSelection("@")}}),t.setOption("gutters",[]),t.on("change",d),d(t))}),[t]),(0,a.useEffect)((()=>{n&&(n.setOption("lineNumbers",!1),n.setOption("gutters",[]),n.on("change",d))}),[n]),(0,a.useEffect)((()=>{r&&(r.setOption("lineNumbers",!1),r.setOption("gutters",[]),r.on("change",d))}),[r]),a.createElement("div",{className:"graphiql-editors"},a.createElement("section",{className:"graphiql-query-editor","aria-label":"Query Editor"},a.createElement("div",{className:"graphiql-query-editor-wrapper"},a.createElement(l.WK,{editorTheme:e.editorTheme,keyMap:e.keyMap,onCopyQuery:e.onCopyQuery,onEdit:e.onEditQuery,readOnly:e.readOnly})),a.createElement("div",{className:"graphiql-toolbar",role:"toolbar","aria-label":"Editor Commands"},a.createElement(l._8,null),a.createElement(l.wC,{onClick:()=>u(),label:"Prettify query (Shift-Ctrl-P)"},a.createElement(l.Kt,{className:"graphiql-toolbar-icon","aria-hidden":"true"})),a.createElement(l.wC,{onClick:()=>s(),label:"Copy query (Shift-Ctrl-C)"},a.createElement(l.TI,{className:"graphiql-toolbar-icon","aria-hidden":"true"})))),a.createElement("div",{className:"graphiql-editor-tools"},a.createElement("div",{className:"graphiql-editor-tools-tabs"},a.createElement(l.v0,{type:"button",className:"variables"===i?"active":"",onClick:()=>{o("variables"===i?"":"variables")}},"Variables"),a.createElement(l.v0,{type:"button",className:"headers"===i?"active":"",onClick:()=>{o("headers"===i?"":"headers")}},"Headers"))),a.createElement("section",{className:`graphiql-editor-tool ${i&&i.length>0?c.tool:c.notool}`,"aria-label":"variables"===i?"Variables":"Headers"},a.createElement(l.hF,{editorTheme:e.editorTheme,isHidden:"variables"!==i,keyMap:e.keyMap,onEdit:e.onEditVariables,readOnly:e.readOnly}),a.createElement(l.LA,{editorTheme:e.editorTheme,isHidden:"headers"!==i,keyMap:e.keyMap,onEdit:e.onEditHeaders,readOnly:e.readOnly})))}class p{constructor(){this.map=new Map,this.length=0}getItem(e){return this.map.get(e)}setItem(e,t){this.map.has(e)||(this.length+=1),this.map.set(e,t)}removeItem(e){this.map.has(e)&&(this.length-=1),this.map.delete(e)}clear(){this.length=0,this.map.clear()}}function m(){return(0,l.JB)({nonNull:!0}).isFetching?a.createElement(l.$j,null):null}function f(e){let{typegraph:t,query:n,code:d,codeLanguage:f,codeFileUrl:h,headers:g={},variables:y={},tab:b=""}=e;const{siteConfig:{customFields:{tgUrl:v}}}=(0,o.Z)(),k=(0,a.useMemo)((()=>new p),[]);return a.createElement(i.Z,{fallback:a.createElement("div",null,"Loading...")},(()=>{const e=(0,a.useMemo)((()=>(0,r.nq)({url:`${v}/${t}`})),[]);return a.createElement(l.j$,{fetcher:e,defaultQuery:n.loc.source.body.trim(),defaultHeaders:JSON.stringify(g),variables:JSON.stringify(y),storage:k},a.createElement("div",{className:"mb-6"},a.createElement("div",{className:`graphiql-container ${c.container}`},d?a.createElement("div",{className:`graphiql-response ${c.panel}`},a.createElement(s.Z,{language:f},d)):null,a.createElement("div",{className:`graphiql-session ${c.editor}`},a.createElement(u,{defaultTab:b})),a.createElement("div",{className:`graphiql-response ${c.response}`},a.createElement(m,null),a.createElement(l.iB,null))),h?a.createElement("small",{className:"mx-2"},"See/edit full code on"," ",a.createElement("a",{href:`https://github.com/metatypedev/metatype/blob/main/${h}`},h)):null))}))}},7128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(1163),r=n(9428),i=n(959);function o(e){let{python:t,...n}=e;return i.createElement(r.Z,(0,a.Z)({code:t.content,codeLanguage:"python",codeFileUrl:t.path},n))}},9081:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"stargazers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:67}};t.loc.source={body:"query {\n  stargazers {\n    login\n    user {\n      name\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var a={};t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),a[e.name.value]=t}})),e.exports=t},7630:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/image.drawio-8088ee38fb8a48af0f464425dcd4e5cd.svg"},9134:e=>{e.exports={content:'with TypeGraph(\n  "backend-for-frontend",\n) as g:\n  public = policies.public()\n  github = HTTPRuntime("https://api.github.com")\n\n  stargazer = t.struct(\n    {\n      "login": t.string().named("login"),\n      "user": github.get(\n        "/users/{user}",\n        t.struct({"user": t.string().from_parent(g("login"))}),\n        t.struct({"name": t.string().optional()}),\n      ),\n    }\n  )\n\n  g.expose(\n    stargazers=github.get(\n      "/repos/metatypedev/metatype/stargazers?per_page=2",\n      t.struct({}),\n      t.array(stargazer),\n    ),\n    default_policy=[public],\n  )',path:"website/use-cases/backend-for-frontend/typegraph.py"}}}]);