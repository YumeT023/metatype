(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[272],{7942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>u,kt:()=>f});var a=n(959);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),p=c(n),d=r,f=p["".concat(l,".").concat(d)]||p[d]||m[d]||i;return n?a.createElement(f,o(o({ref:t},u),{},{components:n})):a.createElement(f,o({ref:t},u))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7400:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>d,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var a=n(1163),r=(n(959),n(7942)),i=n(7128);const o={},s="Function-as-a-service runner",l={unversionedId:"faas-runner/index",id:"faas-runner/index",title:"Function-as-a-service runner",description:"A Function-as-a-Service (FaaS) runner is a platform that allows developers to deploy and run small, single-purpose functions in the cloud. FaaS runners typically provide a serverless architecture, which means that developers do not have to worry about infrastructure management or scaling, as the platform automatically handles these tasks.",source:"@site/use-cases/faas-runner/index.mdx",sourceDirName:"faas-runner",slug:"/faas-runner/",permalink:"/use-cases/faas-runner/",draft:!1,editUrl:"https://github.com/metatypedev/metatype/tree/main/website/use-cases/faas-runner/index.mdx",tags:[],version:"current",frontMatter:{},sidebar:"useCases",previous:{title:"Backend for frontend",permalink:"/use-cases/backend-for-frontend/"},next:{title:"All-in-one GraphQL server",permalink:"/use-cases/graphql-server/"}},c={},u=[{value:"Case study",id:"case-study",level:2},{value:"Metatype&#39;s solution",id:"metatypes-solution",level:2}],p={toc:u},m="wrapper";function d(e){let{components:t,...o}=e;return(0,r.kt)(m,(0,a.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"function-as-a-service-runner"},"Function-as-a-service runner"),(0,r.kt)("p",null,"A Function-as-a-Service (FaaS) runner is a platform that allows developers to deploy and run small, single-purpose functions in the cloud. FaaS runners typically provide a serverless architecture, which means that developers do not have to worry about infrastructure management or scaling, as the platform automatically handles these tasks."),(0,r.kt)("h2",{id:"case-study"},"Case study"),(0,r.kt)("div",{className:"text-center md:float-right p-8"},(0,r.kt)("p",null,(0,r.kt)("img",{src:n(1705).Z,width:"337",height:"311"}))),(0,r.kt)("p",null,"For example, imagine we have an e-commerce application that uses FaaS to process orders. When a customer places an order, multiple functions may need to be executed, such as validating the order, processing the payment, and updating the inventory."),(0,r.kt)("p",null,"Each function may be executed independently by the FaaS platform and may take varying amounts of time to complete. Those functions may also be executed for historical reason on different platforms like AWS Lambda, Google Cloud Functions, or Azure Functions."),(0,r.kt)("p",null,"To collect the results of all the functions in a timely manner, we need to ensure that each function is executed in the correct order and that we are not waiting for a slow function to complete before moving on to the next function."),(0,r.kt)("h2",{id:"metatypes-solution"},"Metatype's solution"),(0,r.kt)("p",null,"To solve the use case of executing multiple functions and collecting their results, Metatype provides two key features."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Function composition/chaining: functions can be chained together to form a pipeline. The output of one function can be used as the input of the next function in the pipeline. This allows us to execute multiple functions in a specific order.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Embedded runner: you can easily write a function that glues together multiple functions and executes them in a specific order. This allows you to execute multiple functions in a specific order. Currently, both Python and Typescript are supported."))),(0,r.kt)(i.Z,{typegraph:"faas-runner",python:n(4155),query:n(5e3),mdxType:"TGExample"}))}d.isMDXComponent=!0},9428:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(959),r=n(6233),i=n(4838),o=n(2232),s=n(2441),l=n(6361);const c={container:"container_KHaM",panel:"panel_p8cl",editor:"editor_LjJP",response:"response_Ger1",tool:"tool_nUFu",notool:"notool_i7V8"},u=e=>{e.getWrapperElement().closest(".graphiql-editor").style.height=`${e.doc.height}px`};function p(e){const{queryEditor:t,variableEditor:n,headerEditor:r}=(0,l._i)({nonNull:!0}),[i,o]=(0,a.useState)(e.defaultTab),s=(0,l.Xd)({onCopyQuery:e.onCopyQuery}),p=(0,l.fE)();return(0,a.useEffect)((()=>{n&&u(n)}),[i,n]),(0,a.useEffect)((()=>{r&&u(r)}),[i,r]),(0,a.useEffect)((()=>{t&&(t.setOption("lineNumbers",!1),t.setOption("extraKeys",{"Alt-G":()=>{t.replaceSelection("@")}}),t.setOption("gutters",[]),t.on("change",u),u(t))}),[t]),(0,a.useEffect)((()=>{n&&(n.setOption("lineNumbers",!1),n.setOption("gutters",[]),n.on("change",u))}),[n]),(0,a.useEffect)((()=>{r&&(r.setOption("lineNumbers",!1),r.setOption("gutters",[]),r.on("change",u))}),[r]),a.createElement("div",{className:"graphiql-editors"},a.createElement("section",{className:"graphiql-query-editor","aria-label":"Query Editor"},a.createElement("div",{className:"graphiql-query-editor-wrapper"},a.createElement(l.WK,{editorTheme:e.editorTheme,keyMap:e.keyMap,onCopyQuery:e.onCopyQuery,onEdit:e.onEditQuery,readOnly:e.readOnly})),a.createElement("div",{className:"graphiql-toolbar",role:"toolbar","aria-label":"Editor Commands"},a.createElement(l._8,null),a.createElement(l.wC,{onClick:()=>p(),label:"Prettify query (Shift-Ctrl-P)"},a.createElement(l.Kt,{className:"graphiql-toolbar-icon","aria-hidden":"true"})),a.createElement(l.wC,{onClick:()=>s(),label:"Copy query (Shift-Ctrl-C)"},a.createElement(l.TI,{className:"graphiql-toolbar-icon","aria-hidden":"true"})))),a.createElement("div",{className:"graphiql-editor-tools"},a.createElement("div",{className:"graphiql-editor-tools-tabs"},a.createElement(l.v0,{type:"button",className:"variables"===i?"active":"",onClick:()=>{o("variables"===i?"":"variables")}},"Variables"),a.createElement(l.v0,{type:"button",className:"headers"===i?"active":"",onClick:()=>{o("headers"===i?"":"headers")}},"Headers"))),a.createElement("section",{className:`graphiql-editor-tool ${i&&i.length>0?c.tool:c.notool}`,"aria-label":"variables"===i?"Variables":"Headers"},a.createElement(l.hF,{editorTheme:e.editorTheme,isHidden:"variables"!==i,keyMap:e.keyMap,onEdit:e.onEditVariables,readOnly:e.readOnly}),a.createElement(l.LA,{editorTheme:e.editorTheme,isHidden:"headers"!==i,keyMap:e.keyMap,onEdit:e.onEditHeaders,readOnly:e.readOnly})))}class m{constructor(){this.map=new Map,this.length=0}getItem(e){return this.map.get(e)}setItem(e,t){this.map.has(e)||(this.length+=1),this.map.set(e,t)}removeItem(e){this.map.has(e)&&(this.length-=1),this.map.delete(e)}clear(){this.length=0,this.map.clear()}}function d(){return(0,l.JB)({nonNull:!0}).isFetching?a.createElement(l.$j,null):null}function f(e){let{typegraph:t,query:n,code:u,codeLanguage:f,codeFileUrl:h,headers:y={},variables:g={},tab:v=""}=e;const{siteConfig:{customFields:{tgUrl:b}}}=(0,o.Z)(),E=(0,a.useMemo)((()=>new m),[]);return a.createElement(i.Z,{fallback:a.createElement("div",null,"Loading...")},(()=>{const e=(0,a.useMemo)((()=>(0,r.nq)({url:`${b}/${t}`})),[]);return a.createElement(l.j$,{fetcher:e,defaultQuery:n.loc.source.body.trim(),defaultHeaders:JSON.stringify(y),variables:JSON.stringify(g),storage:E},a.createElement("div",{className:"mb-6"},a.createElement("div",{className:`graphiql-container ${c.container}`},u?a.createElement("div",{className:`graphiql-response ${c.panel}`},a.createElement(s.Z,{language:f},u)):null,a.createElement("div",{className:`graphiql-session ${c.editor}`},a.createElement(p,{defaultTab:v})),a.createElement("div",{className:`graphiql-response ${c.response}`},a.createElement(d,null),a.createElement(l.iB,null))),h?a.createElement("small",{className:"mx-2"},"See/edit full code on"," ",a.createElement("a",{href:`https://github.com/metatypedev/metatype/blob/main/${h}`},h)):null))}))}},7128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var a=n(1163),r=n(9428),i=n(959);function o(e){let{python:t,...n}=e;return i.createElement(r.Z,(0,a.Z)({code:t.content,codeLanguage:"python",codeFileUrl:t.path},n))}},5e3:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pycumsum"},arguments:[{kind:"Argument",name:{kind:"Name",value:"n"},value:{kind:"IntValue",value:"5"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"tscumsum"},arguments:[{kind:"Argument",name:{kind:"Name",value:"n"},value:{kind:"IntValue",value:"5"}}],directives:[]}]}}],loc:{start:0,end:45}};t.loc.source={body:"query {\n  pycumsum(n: 5)\n\n  tscumsum(n: 5)\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var a=e.type;"NamedType"===a.kind&&t.add(a.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var a={};t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),a[e.name.value]=t}})),e.exports=t},1705:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n.p+"assets/images/image.drawio-1eac40d204b6d3f2e3f634e3bd1b86b1.svg"},4155:e=>{e.exports={content:'with TypeGraph(\n  "faas-runner",\n) as g:\n  public = policies.public()\n\n  deno = DenoRuntime()\n  python = PythonWasiRuntime()\n\n  def cumsum(mat):\n    inp = t.struct({"n": t.integer().min(0).max(100)})\n    out = t.integer()\n    return t.func(inp, out, mat)\n\n  g.expose(\n    pycumsum=cumsum(python.from_lambda(lambda inp: sum(range(inp["n"])))),\n    tscumsum=cumsum(\n      PureFunMat(\n        "({n}) => Array.from(Array(5).keys()).reduce((sum, e) => sum + e, 0)"\n      )\n    ),\n    default_policy=[public],\n  )',path:"website/use-cases/faas-runner/typegraph.py"}}}]);