(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[4363],{7942:(e,t,n)=>{"use strict";n.d(t,{Zo:()=>d,kt:()=>h});var r=n(959);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),l=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=l(e.components);return r.createElement(c.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=l(n),m=a,h=p["".concat(c,".").concat(m)]||p[m]||u[m]||i;return n?r.createElement(h,o(o({ref:t},d),{},{components:n})):r.createElement(h,o({ref:t},d))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[p]="string"==typeof e?e:a,o[1]=s;for(var l=2;l<i;l++)o[l]=n[l];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2854:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=n(1163),a=(n(959),n(7942)),i=n(7128);const o={},s="(Micro)services orchestration",c={unversionedId:"microservice-orchestration/index",id:"microservice-orchestration/index",title:"(Micro)services orchestration",description:"Microservices and small services are architectural styles for developing applications by breaking them down into small, independent services that can be deployed and scaled independently. Each micro or small service typically focuses on a specific business function or task, and communicates with other services through well-defined APIs.",source:"@site/use-cases/microservice-orchestration/index.mdx",sourceDirName:"microservice-orchestration",slug:"/microservice-orchestration/",permalink:"/use-cases/microservice-orchestration/",draft:!1,editUrl:"https://github.com/metatypedev/metatype/tree/main/website/use-cases/microservice-orchestration/index.mdx",tags:[],version:"current",frontMatter:{},sidebar:"useCases",previous:{title:"IAM provider",permalink:"/use-cases/iam-provider/"},next:{title:"ORM for the edge",permalink:"/use-cases/orm-for-the-edge/"}},l={},d=[{value:"Case study",id:"case-study",level:2},{value:"Metatype&#39;s solution",id:"metatypes-solution",level:2}],p={toc:d},u="wrapper";function m(e){let{components:t,...o}=e;return(0,a.kt)(u,(0,r.Z)({},p,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"microservices-orchestration"},"(Micro)services orchestration"),(0,a.kt)("p",null,"Microservices and small services are architectural styles for developing applications by breaking them down into small, independent services that can be deployed and scaled independently. Each micro or small service typically focuses on a specific business function or task, and communicates with other services through well-defined APIs."),(0,a.kt)("h2",{id:"case-study"},"Case study"),(0,a.kt)("div",{className:"text-center md:float-right p-8"},(0,a.kt)("p",null,(0,a.kt)("img",{src:n(1463).Z,width:"261",height:"301"}))),(0,a.kt)("p",null,"Let's say your company develop a healthcare platform and that one of the microservices is responsible for handling patient records (owned by team A), and another microservice is responsible for handling appointment scheduling (owned by team B)."),(0,a.kt)("p",null,"When a patient schedules an appointment, the appointment scheduling microservice needs access to the patient's records to ensure that the appointment is scheduled with the right provider and that the provider has the necessary information to provide effective care. However, since patient records contain sensitive information, it is important to ensure that only authorized users have access to them."),(0,a.kt)("p",null,"To achieve this, the healthcare platform must use authentication and authorization on each API, which allows sharing only required information."),(0,a.kt)("h2",{id:"metatypes-solution"},"Metatype's solution"),(0,a.kt)("p",null,"Metatype can act as a central entry point for all incoming requests and responses between the microservices themselves and external clients. It is responsible for routing requests to the appropriate microservices and handling responses from those microservices, while verifying the authentication and authorization for each request."),(0,a.kt)("p",null,"Additionally, Metatype gateway can provide other important features such as rate limiting, caching, and request/response transformations. It can even provide an API from another typegraph and delegate the query processing to it."),(0,a.kt)(i.Z,{typegraph:"team-a",python:n(3280),query:n(7050),mdxType:"TGExample"}))}m.isMDXComponent=!0},9428:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(959),a=n(6233),i=n(4838),o=n(2232),s=n(2441),c=n(6361);const l={container:"container_KHaM",panel:"panel_p8cl",editor:"editor_LjJP",response:"response_Ger1",tool:"tool_nUFu",notool:"notool_i7V8"},d=e=>{e.getWrapperElement().closest(".graphiql-editor").style.height=`${e.doc.height}px`};function p(e){const{queryEditor:t,variableEditor:n,headerEditor:a}=(0,c._i)({nonNull:!0}),[i,o]=(0,r.useState)(e.defaultTab),s=(0,c.Xd)({onCopyQuery:e.onCopyQuery}),p=(0,c.fE)();return(0,r.useEffect)((()=>{n&&d(n)}),[i,n]),(0,r.useEffect)((()=>{a&&d(a)}),[i,a]),(0,r.useEffect)((()=>{t&&(t.setOption("lineNumbers",!1),t.setOption("extraKeys",{"Alt-G":()=>{t.replaceSelection("@")}}),t.setOption("gutters",[]),t.on("change",d),d(t))}),[t]),(0,r.useEffect)((()=>{n&&(n.setOption("lineNumbers",!1),n.setOption("gutters",[]),n.on("change",d))}),[n]),(0,r.useEffect)((()=>{a&&(a.setOption("lineNumbers",!1),a.setOption("gutters",[]),a.on("change",d))}),[a]),r.createElement("div",{className:"graphiql-editors"},r.createElement("section",{className:"graphiql-query-editor","aria-label":"Query Editor"},r.createElement("div",{className:"graphiql-query-editor-wrapper"},r.createElement(c.WK,{editorTheme:e.editorTheme,keyMap:e.keyMap,onCopyQuery:e.onCopyQuery,onEdit:e.onEditQuery,readOnly:e.readOnly})),r.createElement("div",{className:"graphiql-toolbar",role:"toolbar","aria-label":"Editor Commands"},r.createElement(c._8,null),r.createElement(c.wC,{onClick:()=>p(),label:"Prettify query (Shift-Ctrl-P)"},r.createElement(c.Kt,{className:"graphiql-toolbar-icon","aria-hidden":"true"})),r.createElement(c.wC,{onClick:()=>s(),label:"Copy query (Shift-Ctrl-C)"},r.createElement(c.TI,{className:"graphiql-toolbar-icon","aria-hidden":"true"})))),r.createElement("div",{className:"graphiql-editor-tools"},r.createElement("div",{className:"graphiql-editor-tools-tabs"},r.createElement(c.v0,{type:"button",className:"variables"===i?"active":"",onClick:()=>{o("variables"===i?"":"variables")}},"Variables"),r.createElement(c.v0,{type:"button",className:"headers"===i?"active":"",onClick:()=>{o("headers"===i?"":"headers")}},"Headers"))),r.createElement("section",{className:`graphiql-editor-tool ${i&&i.length>0?l.tool:l.notool}`,"aria-label":"variables"===i?"Variables":"Headers"},r.createElement(c.hF,{editorTheme:e.editorTheme,isHidden:"variables"!==i,keyMap:e.keyMap,onEdit:e.onEditVariables,readOnly:e.readOnly}),r.createElement(c.LA,{editorTheme:e.editorTheme,isHidden:"headers"!==i,keyMap:e.keyMap,onEdit:e.onEditHeaders,readOnly:e.readOnly})))}class u{constructor(){this.map=new Map,this.length=0}getItem(e){return this.map.get(e)}setItem(e,t){this.map.has(e)||(this.length+=1),this.map.set(e,t)}removeItem(e){this.map.has(e)&&(this.length-=1),this.map.delete(e)}clear(){this.length=0,this.map.clear()}}function m(){return(0,c.JB)({nonNull:!0}).isFetching?r.createElement(c.$j,null):null}function h(e){let{typegraph:t,query:n,code:d,codeLanguage:h,codeFileUrl:f,headers:y={},variables:v={},tab:g=""}=e;const{siteConfig:{customFields:{tgUrl:b}}}=(0,o.Z)(),E=(0,r.useMemo)((()=>new u),[]);return r.createElement(i.Z,{fallback:r.createElement("div",null,"Loading...")},(()=>{const e=(0,r.useMemo)((()=>(0,a.nq)({url:`${b}/${t}`})),[]);return r.createElement(c.j$,{fetcher:e,defaultQuery:n.loc.source.body.trim(),defaultHeaders:JSON.stringify(y),variables:JSON.stringify(v),storage:E},r.createElement("div",{className:"mb-6"},r.createElement("div",{className:`graphiql-container ${l.container}`},d?r.createElement("div",{className:`graphiql-response ${l.panel}`},r.createElement(s.Z,{language:h},d)):null,r.createElement("div",{className:`graphiql-session ${l.editor}`},r.createElement(p,{defaultTab:g})),r.createElement("div",{className:`graphiql-response ${l.response}`},r.createElement(m,null),r.createElement(c.iB,null))),f?r.createElement("small",{className:"mx-2"},"See/edit full code on"," ",r.createElement("a",{href:`https://github.com/metatypedev/metatype/blob/main/${f}`},f)):null))}))}},7128:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});var r=n(1163),a=n(9428),i=n(959);function o(e){let{python:t,...n}=e;return i.createElement(a.Z,(0,r.Z)({code:t.content,codeLanguage:"python",codeFileUrl:t.path},n))}},7050:e=>{var t={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",variableDefinitions:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"version_team_b"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"version_team_a"},arguments:[],directives:[]}]}}],loc:{start:0,end:45}};t.loc.source={body:"query {\n  version_team_b\n\n  version_team_a\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function n(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var r=e.type;"NamedType"===r.kind&&t.add(r.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){n(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){n(e,t)})),e.definitions&&e.definitions.forEach((function(e){n(e,t)}))}var r={};t.definitions.forEach((function(e){if(e.name){var t=new Set;n(e,t),r[e.name.value]=t}})),e.exports=t},1463:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=n.p+"assets/images/image.drawio-bfa7a9325fe21576a24a097c2c28615c.svg"},3280:e=>{e.exports={content:'with TypeGraph(\n  "team-a",\n) as g1:\n  public = policies.public()\n\n  deno = DenoRuntime()\n  records = GraphQLRuntime(environ.get("TG_URL", "http://localhost:7890") + "/team-b")\n\n  g1.expose(\n    version_team_b=records.query(t.struct({}), t.integer(), path=("version",)),\n    version_team_a=deno.static(t.integer(), 3),\n    default_policy=[public],\n  )\n\nwith TypeGraph(\n  "team-b",\n) as g2:\n  public = policies.public()\n\n  deno = DenoRuntime()\n\n  g2.expose(\n    version=deno.static(t.integer(), 12),\n    record=deno.static(t.struct({"weight": t.integer()}), {"weight": 100}),\n    default_policy=[public],\n  )',path:"website/use-cases/microservice-orchestration/typegraph.py"}}}]);