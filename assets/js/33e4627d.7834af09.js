"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[8421],{2511:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>o,contentTitle:()=>l,default:()=>d,frontMatter:()=>n,metadata:()=>i,toc:()=>c});var a=r(1163),s=(r(959),r(7942));r(9688);const n={},l="The missing GraphQL server",i={unversionedId:"graphql-server/index",id:"graphql-server/index",title:"The missing GraphQL server",description:"Work in progress.",source:"@site/use-cases/graphql-server/index.mdx",sourceDirName:"graphql-server",slug:"/graphql-server/",permalink:"/use-cases/graphql-server/",draft:!1,editUrl:"https://github.com/metatypedev/metatype/tree/main/website/use-cases/graphql-server/index.mdx",tags:[],version:"current",frontMatter:{},sidebar:"useCases",previous:{title:"Function as a service (FaaS) runner",permalink:"/use-cases/faas-runner/"},next:{title:"Programmable API gateway",permalink:"/use-cases/programmable-api-gateway/"}},o={},c=[],p={toc:c},m="wrapper";function d(e){let{components:t,...r}=e;return(0,s.kt)(m,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,s.kt)("h1",{id:"the-missing-graphql-server"},"The missing GraphQL server"),(0,s.kt)("p",null,"Work in progress."))}d.isMDXComponent=!0},6986:(e,t,r)=>{r.d(t,{Z:()=>u});var a=r(959),s=r(3268),n=r(715),l=r(7114),i=r(9037);const o={container:"container_KHaM",panel:"panel_p8cl",editor:"editor_LjJP",response:"response_Ger1",tool:"tool_nUFu",notool:"notool_i7V8"},c=e=>{e.getWrapperElement().closest(".graphiql-editor").style.height=`${e.doc.height}px`};function p(e){const{queryEditor:t,variableEditor:r,headerEditor:s}=(0,i._i)({nonNull:!0}),[n,l]=(0,a.useState)(e.defaultTab),p=(0,i.Xd)({onCopyQuery:e.onCopyQuery}),m=(0,i.fE)();return(0,a.useEffect)((()=>{r&&c(r)}),[n,r]),(0,a.useEffect)((()=>{s&&c(s)}),[n,s]),(0,a.useEffect)((()=>{t&&(t.setOption("lineNumbers",!1),t.setOption("keyMap",t.getOption("extraKeys")),t.setOption("gutters",[]),t.on("change",c),c(t))}),[t]),(0,a.useEffect)((()=>{r&&(r.setOption("lineNumbers",!1),r.setOption("gutters",[]),r.on("change",c))}),[r]),(0,a.useEffect)((()=>{s&&(s.setOption("lineNumbers",!1),s.setOption("gutters",[]),s.on("change",c))}),[s]),a.createElement("div",{className:"graphiql-editors"},a.createElement("section",{className:"graphiql-query-editor","aria-label":"Query Editor"},a.createElement("div",{className:"graphiql-query-editor-wrapper"},a.createElement(i.WK,{editorTheme:e.editorTheme,keyMap:e.keyMap,onCopyQuery:e.onCopyQuery,onEdit:e.onEditQuery,readOnly:e.readOnly})),a.createElement("div",{className:"graphiql-toolbar",role:"toolbar","aria-label":"Editor Commands"},a.createElement(i._8,null),a.createElement(i.wC,{onClick:()=>m(),label:"Prettify query (Shift-Ctrl-P)"},a.createElement(i.Kt,{className:"graphiql-toolbar-icon","aria-hidden":"true"})),a.createElement(i.wC,{onClick:()=>p(),label:"Copy query (Shift-Ctrl-C)"},a.createElement(i.TI,{className:"graphiql-toolbar-icon","aria-hidden":"true"})))),a.createElement("div",{className:"graphiql-editor-tools"},a.createElement("div",{className:"graphiql-editor-tools-tabs"},a.createElement(i.v0,{type:"button",className:"variables"===n?"active":"",onClick:()=>{l("variables"===n?"":"variables")}},"Variables"),a.createElement(i.v0,{type:"button",className:"headers"===n?"active":"",onClick:()=>{l("headers"===n?"":"headers")}},"Headers"))),a.createElement("section",{className:`graphiql-editor-tool ${n&&n.length>0?o.tool:o.notool}`,"aria-label":"variables"===n?"Variables":"Headers"},a.createElement(i.hF,{editorTheme:e.editorTheme,isHidden:"variables"!==n,keyMap:e.keyMap,onEdit:e.onEditVariables,readOnly:e.readOnly}),a.createElement(i.LA,{editorTheme:e.editorTheme,isHidden:"headers"!==n,keyMap:e.keyMap,onEdit:e.onEditHeaders,readOnly:e.readOnly})))}class m{constructor(){this.map=new Map,this.length=0}getItem(e){return this.map.get(e)}setItem(e,t){this.map.has(e)||(this.length+=1),this.map.set(e,t)}removeItem(e){this.map.has(e)&&(this.length-=1),this.map.delete(e)}clear(){this.length=0,this.map.clear()}}function d(){return(0,i.JB)({nonNull:!0}).isFetching?a.createElement(i.$j,null):null}function u(e){let{typegraph:t,query:r,panel:c=null,headers:u={},variables:h={},tab:g=""}=e;const{siteConfig:{customFields:{tgUrl:y}}}=(0,l.Z)(),E=(0,a.useMemo)((()=>new m),[]);return a.createElement(n.Z,{fallback:a.createElement("div",null,"Loading...")},(()=>{const e=(0,a.useMemo)((()=>(0,s.nq)({url:`${y}/${t}`})),[]);return a.createElement(i.j$,{fetcher:e,defaultQuery:r.loc.source.body.trim(),defaultHeaders:JSON.stringify(u),variables:JSON.stringify(h),storage:E},a.createElement("div",{className:`graphiql-container ${o.container}`},c?a.createElement("div",{className:`graphiql-response ${o.panel}`},c):null,a.createElement("div",{className:`graphiql-session ${o.editor}`},a.createElement(p,{defaultTab:g})),a.createElement("div",{className:`graphiql-response ${o.response}`},a.createElement(d,null),a.createElement(i.iB,null))))}))}},9688:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(1163),s=r(6986),n=r(9107),l=r(959);function i(e){let{python:t,...r}=e;return l.createElement(s.Z,(0,a.Z)({panel:l.createElement(n.Z,{language:"python"},t)},r))}}}]);